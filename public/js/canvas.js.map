{"version":3,"names":[],"mappings":"","sources":["canvas.js"],"sourcesContent":["var emit;\r\nvar setCanvas = (function() {\r\n\treturn function() {\r\n\t\tvar canvas = document.getElementById('bg-canvas');\r\n\t\tvar context = canvas.getContext('2d');\r\n\t\tvar width = canvas.scrollWidth,  height = canvas.scrollHeight;\r\n\t\tvar scaleW = 1366/width, scaleH = 1075/height;\r\n\r\n\t\tcontext.fillStyle = '#090723';\r\n\t\tcontext.fillRect(0, 0, width * scaleW, scaleH * height);\r\n\t\t\r\n\t\t// 星星的角度;\r\n\t\tvar angle = 0.904;\r\n\t\t// Math.asin(1075/1366);\r\n\r\n\t\tvar x = [], y = [], radius = [];\r\n\t\tfor(var i = 0; i < 150; i++) {\r\n\t\t\tx[i] = random(0, 1366, false);\r\n\t\t\ty[i] = random(0, 1075, false);\r\n\t\t\tradius[i] = random(0.2, 0.8);\r\n\t\t\tdrawCircle(x[i], y[i], radius[i], '#fff')\r\n\t\t}\r\n\r\n\t\tvar star1 = [], h1, w1, v1;\r\n\t\tvar star2 = [], h2, w2, v2;\r\n\t\tvar ed1 = ed2 = 0;\r\n\t\tsetStar1();\r\n\t\tsetStar2();\r\n\r\n\t\tvar pos1 = pos(0.01), pos2 = pos(0.02), pos3 = pos(0.04);// 星星速度函数;\r\n\r\n\t\temit = setInterval(function() { // 每一帧;\r\n\t\t\tcontext.clearRect(0, 0, width * scaleW, scaleH * height);\r\n\t\t\tcontext.fillStyle = '#090723';\r\n\t\t\tcontext.fillRect(0, 0, width * scaleW, scaleH * height);\r\n\t\t\t\r\n\t\t\tstarMove(0,  30, pos1());\r\n\t\t\tstarMove(30, 60, pos2());\r\n\t\t\tstarMove(60, 90, pos3());\r\n\t\t\tstarMove(90, 150);\r\n\r\n\t\t\tif(ed1 == 0){\r\n\t\t\t\tdrawFlame(1);\r\n\t\t\t}\r\n\t\t\tif(ed2 == 0)\r\n\t\t\t\tdrawFlame(2);\r\n\r\n\t\t\tif(ed1 > 0) ed1-=50;\r\n\t\t\tif(ed2 > 0) ed2-=50;\r\n\t\t\t\r\n\t\t\tif(star1[0] <= 0 ) {\r\n\t\t\t\tsetStar1(); //重置star;\r\n\t\t\t\ted1 = random(0, 8, true) * 1000;\r\n\t\t\t}\r\n\t\t\tif(star2[1] >= 1075) {\r\n\t\t\t\tsetStar2();\r\n\t\t\t\ted2 = random(0, 8, true) * 1000;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t} ,10)\r\n\r\n\r\n\t\tfunction setStar1() {\r\n\t\t\tstar1 = [random(400, 1366, true), 0];\r\n\t\t\th1 = random(30, 100);\r\n\t\t\tw1 = random(0, 0.4);\r\n\t\t\tv1 = random(6, 10, true);\r\n\t\t}\r\n\t\tfunction setStar2() {\r\n\t\t\tstar2 = [1366, random(0, 500, true)];\r\n\t\t\th2 = random(30, 100);\r\n\t\t\tw2 = random(0, 0.4);\r\n\t\t\tv2 = random(6, 10, true);\r\n\t\t}\r\n\t\tfunction drawFlame(value) {\r\n\t\t\tcontext.save();\r\n\t\t\tif(value == 1) {\r\n\t\t\t\tcontext.translate(star1[0], star1[1])\r\n\t\t\t} else {\r\n\t\t\t\tcontext.translate(star2[0], star2[1])\r\n\t\t\t}\r\n\t\t\tcontext.rotate(0.904);\r\n\t\t\tcontext.beginPath();\r\n\t\t\tcontext.moveTo(0, 0);\r\n\t\t\tif(value ==1 ) {\r\n\t\t\t\tcontext.lineTo(0, h1);\r\n\t\t\t\tcontext.lineWidth = w1;\r\n\t\t\t} else {\r\n\t\t\t\tcontext.lineTo(0, h2);\r\n\t\t\t\tcontext.lineWidth = w2;\r\n\t\t\t}\r\n\t\t\tcontext.strokeStyle = '#fff';\r\n\t\t\tcontext.closePath();\r\n\t\t\tcontext.stroke();\r\n\t\t\tcontext.restore();\r\n\t\t\tif(value == 1) {\r\n\t\t\t\tstar1[0] -= v1;\r\n\t\t\t\tstar1[1] += v1 * 1075 / 1366;\r\n\r\n\t\t\t} else {\r\n\t\t\t\tstar2[0] -= v2;\r\n\t\t\t\tstar2[1] += v2 * 1075 / 1366;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\r\n\t\t// @ params n: 星星速度;\r\n\t\tfunction pos(n) {\r\n\t\t\tvar x = 0;\r\n\t\t\treturn function() {\r\n\t\t\t\treturn x-= n;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction starMove(begin, end, s) {\r\n\t\t\tcontext.save();\r\n\t\t\tif(s) context.translate(s, 0)\r\n\t\t\tfor(var i = begin; i < end; i++) {\r\n\t\t\t\tif(Math.abs(s) > x[i]) x[i] = 1366 + Math.abs(s);\r\n\r\n\t\t\t\tdrawCircle(x[i], y[i], radius[i], '#fff')\r\n\t\t\t}\r\n\t\t\tcontext.restore()\r\n\t\t}\r\n\t\t\r\n\r\n\t\tfunction drawCircle(x, y, radius, color) {\r\n\t\t\tcontext.beginPath();\r\n\t\t\tcontext.fillStyle = color;\r\n\t\t\tcontext.arc(x, y, radius, 0, Math.PI * 2, true);\r\n\t\t\tcontext.closePath();\r\n\t\t\tcontext.fill();\r\n\t\t}\r\n\r\n\t\tfunction random(x, y, type) {\r\n\t\t\tif(type) {\r\n\t\t\t\treturn Math.floor(Math.random() * (y-x+1))+x;\r\n\t\t\t}\r\n\t\t\treturn Math.random() * (y-x) + x;\r\n\t\t}\r\n\t}\r\n})();"],"file":"canvas.js"}